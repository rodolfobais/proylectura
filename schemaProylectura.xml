<?xml version="1.0" encoding="UTF-8"?>
  <database defaultIdMethod="native" defaultPhpNamingMethod="phpname" name="proylectura">
      
    <table name="amistad" phpName="Amistad" idMethod="native" package="proylectura.model">
        <column name="id"              phpName="Id"              type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="id_usuario"      phpName="Id_usuario"      type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_usuarioamigo" phpName="id_usuarioamigo" type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="estado"          phpName="estado"          type="INTEGER" required="true" sqlType="INT(10)" />
    </table>

    <table name="audiolibro"  phpName="Audiolibro" idMethod="native" package="proylectura.model">
        <column name="id"     phpName="Id"     type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nombre" phpName="Nombre" type="CHAR" size="50" required="true"/>
        <column name="fecha"  phpName="Fecha" type="DATE" required="true"/>
        <column name="hash"   phpName="Hash"   type="CHAR" size="250" required="true" />
    </table>

    <table name="autor"  phpName="Autor" idMethod="native" package="proylectura.model">
        <column name="id"     phpName="Id"     type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nombre" phpName="Nombre" type="CHAR" size="100" required="true"/>
    </table>

    <table name="calificacion"  phpName="Calificacion" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="puntuacion"   phpName="Puntuacion"    type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="comentario"   phpName="Comentario"    size="200"     required="true" type="CHAR" />
        <column name="id_usuario"   phpName="Id_usuario"    type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_lista"   phpName="Id_lista"    type="INTEGER" required="true" sqlType="INT(10)" />
    </table>

    <table name="genero"  phpName="Genero" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nombre"   phpName="Nombre"    size="50"     required="true" type="CHAR" />
    </table>
    /*CREATE TABLE IF NOT EXISTS `libro` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `fecha` datetime NOT NULL,
  `hash` varchar(250) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `id_genero` int(11) NOT NULL,
  `id_autor` int(11) NOT NULL,
  `image` varchar(255) NOT NULL,
  `sinopsis` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id_autor` (`id_autor`),
  KEY `id_genero` (`id_genero`)
)*/
    <table name="libro"  phpName="Libro" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nombre"   phpName="Nombre"    size="50"     required="true" type="CHAR" />
        <column name="fecha"  phpName="Fecha" type="DATE" required="false"/>
        <column name="hash"   phpName="Hash"   type="CHAR" size="250" required="false" />
        <column name="id_genero"   phpName="Id_genero"    type="INTEGER" required="false" sqlType="INT(10)" />
        <column name="id_autor"   phpName="Id_autor"    type="INTEGER" required="false" sqlType="INT(10)" />
        <column name="image"   phpName="Image"   type="CHAR" size="255" required="false" />
        <column name="sinopsis"   phpName="Sinopsis"   type="CHAR" size="255" required="false" />
        <column name="texto"   phpName="Texto"   type="BLOB" required="false" />
    </table>
/*
CREATE TABLE IF NOT EXISTS `usuario` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nick` varchar(50) NOT NULL,
  `nombre` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `mail` varchar(100) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `password` varchar(15) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `admin` int(1) NOT NULL,
  PRIMARY KEY (`id`)
) */    
    <table name="usuario"  phpName="Usuario" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nick"   phpName="Nick"    size="50"     required="true" type="CHAR" />
        <column name="nombre"   phpName="Nombre"    size="50"     required="true" type="CHAR" />
        <column name="mail"   phpName="mail"   type="CHAR" size="100" required="true" />
        <column name="password"   phpName="Password"   type="CHAR" size="255" required="true" />
        <column name="admin"   phpName="Admin"   type="INTEGER" required="true" />
    </table>
    /*
    
Tabla lista
  `id` int(11)
  `nombre` varchar(50)
  `fecha` datetime 
  `id_visibilidad` int(11)
  `id_usuario` int(11) 
  `id_genero` int(11) 
*/
    <table name="lista"  phpName="Lista" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="nombre"   phpName="Nombre"    size="50"     required="true" type="CHAR" />
        <column name="fecha"  phpName="Fecha" type="DATE" required="true"/>
        <column name="id_visibilidad"   phpName="Id_visibilidad"    type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_usuario"   phpName="Id_usuario"    type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_genero"   phpName="Id_genero"    type="INTEGER" required="true" sqlType="INT(10)" />
    </table>
    /*
Tabla lista_audiolibro
  `id` int(11)
  `id_audiolibro` int(11) 
  `id_lista` int(11) 
*/
    <table name="lista_audiolibro"  phpName="Lista_audiolibro" idMethod="native" package="proylectura.model">
        <column name="id"           phpName="Id"            type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="id_audiolibro"   phpName="Id_audiolibro"    type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_lista"   phpName="Id_lista"    type="INTEGER" required="true" sqlType="INT(10)" />
    </table>
    /*
Tabla reproducido
  `id` int(11) 
  `fecha` datetime
  `id_lista` int(11) 
  `id_usuario` int(11) 
    */
    <table name="libro_colaborador" phpName="Libro_colaborador" idMethod="native" package="proylectura.model">
        <column name="id" phpName="Id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true"  sqlType="INT(10)" />
        <column name="idlibro" phpName="Idlibro" type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="idusuario" phpName="Idusuario" type="INTEGER" required="true" sqlType="INT(10)" />
        <foreign-key foreignTable="libro" name="libro_colaborador_libro">
            <reference local="idlibro" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="usuario" name="libro_colaborador_usuario">
            <reference local="idusuario" foreign="id"/>
        </foreign-key>
    </table>
    
    <table name="libro_version" phpName="Libro_version" idMethod="native" package="proylectura.model">
        <column name="id" phpName="Id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true"  sqlType="INT(10)" />
        <column name="idlibro" phpName="Idlibro" type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="fecha"  phpName="Fecha" type="DATE" required="true"/>
        <column name="hora"  phpName="Hora" size="8"     required="true" type="CHAR"/>
        <column name="idusuario" phpName="Idusuario" type="INTEGER" required="true" sqlType="INT(10)" />
        <foreign-key foreignTable="libro" name="libro_version_libro">
            <reference local="idlibro" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="usuario" name="libro_version_usuario">
            <reference local="idusuario" foreign="id"/>
        </foreign-key>
    </table>
    
    
    
    <table name="mensaje" phpName="Mensaje" idMethod="native" package="proylectura.model">
        <column name="id"    phpName="Id"   type="INTEGER" required="true" sqlType="INT(10)" primaryKey= "true" autoIncrement="true" />
        <column name="id_usuario_destinatario"    phpName="Id_usuario_destinatario"   type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_usuario_remitente"   phpName="Id_usuario_remitente"  type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="mensaje"   phpName="mensaje"    size="800"     required="true" type="CHAR" />
        <foreign-key foreignTable="usuario" name="mensaje_usuario_detinatario">
            <reference local="id_usuario_destinatario" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="usuario" name="mensaje_usuario_remitente">
            <reference local="id_usuario_remitente" foreign="id"/>
        </foreign-key>
    </table>

   
    <table name="notificacion" phpName="Notificacion" idMethod="native" package="proylectura.model">
        <column name="id"    phpName="Id"   type="INTEGER" required="true" sqlType="INT(10)" primaryKey= "true" autoIncrement="true" />
        <column name="id_notificacion"    phpName="Id_notificacion"   type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_usuario"   phpName="Id_usuario"  type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="descripcion"   phpName="Descripcion"    size="100"     required="true" type="CHAR" />
        <foreign-key foreignTable="usuario" name="notificacion_usuario">
            <reference local="id_usuario" foreign="id"/>
        </foreign-key>
    </table>     

    <table name="solicitud" phpName="Solicitud" idMethod="native" package="proylectura.model">
        <column name="id"    phpName="Id"   type="INTEGER" required="true" sqlType="INT(10)" primaryKey= "true" autoIncrement="true" />
        <column name="id_usuario_solicitado"    phpName="Id_usuario_solicitado"   type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_usuario_solicitante"   phpName="Id_usuario_solicitante"  type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="estado"   phpName="Estado"  type="INTEGER"  required="true" sqlType="INT(10)" />
        <column name="fecha"  phpName="Fecha" type="DATE" required="true"/>
        <foreign-key foreignTable="usuario" name="solicitud_usuario_solicitado">
            <reference local="id_usuario_solicitado" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="usuario" name="solicitud_usuario_solicitante">
            <reference local="id_usuario_solicitante" foreign="id"/>
        </foreign-key>
    </table>
<!--
CREATE TABLE IF NOT EXISTS `slider_categ` (
  `id` int(11) NOT NULL,
  `descrp` varchar(50) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`id`)
)    
-->    
    <table name="slider_categ"  phpName="Slider_categ" idMethod="native" package="proylectura.model">
        <column name="id"     phpName="Id"     type="INTEGER" required="true" sqlType="INT(10)" primaryKey="true" autoIncrement="true" />
        <column name="descrp" phpName="Descrp" type="CHAR" size="50" required="true"/>
    </table>
    <!--
CREATE TABLE IF NOT EXISTS `slider_mae` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_libro` int(11) NOT NULL,
  `posicion` int(11) NOT NULL,
  `categoria` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) )    
-->  
    <table name="slider_mae" phpName="Slider_mae" idMethod="native" package="proylectura.model">
        <column name="id"    phpName="Id"   type="INTEGER" required="true" sqlType="INT(10)" primaryKey= "true" autoIncrement="true" />
        <column name="id_libro"    phpName="Id_libro"   type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="posicion"   phpName="Posicion"  type="INTEGER" required="true" sqlType="INT(10)" />
        <column name="id_categoria"   phpName="Id_categoria"  type="INTEGER"  required="true" sqlType="INT(10)" />
        <foreign-key foreignTable="libro" name="slider_mae_libro">
            <reference local="id_libro" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="slider_categ" name="slider_mae_categoria">
            <reference local="id_categoria" foreign="id"/>
        </foreign-key>
    </table>

    
</database>
